<!DOCTYPE html>
<html>
  <head>
    <title>Haptic Feedback</title>
    <link rel="stylesheet" href="style.css" />
  </head>

  <body>
    <h1>Haptic Feedback</h1>
    <button
      onmousedown="startVibration()"
      onmouseup="stopVibration()"
      ontouchstart="startVibration()"
      ontouchend="stopVibration()"
    ></button>
    <p>
      Go ahead, press and hold the button<br />to experience the haptic
      feedback!
    </p>
    <button id="installApp">Install</button>
  </body>

  <script>
    let deferredPrompt;
    window.addEventListener("beforeinstallprompt", (e) => {
      deferredPrompt = e;
    });

    const installApp = document.getElementById("installApp");
    installApp.addEventListener("click", async () => {
      if (deferredPrompt !== null) {
        deferredPrompt.prompt();
        const { outcome } = await deferredPrompt.userChoice;
        if (outcome === "accepted") {
          deferredPrompt = null;
        }
      }
    });

    var vibrationInterval;

    function startVibration() {
      if ("vibrate" in navigator) {
        // Start vibrating with an indefinite duration
        navigator.vibrate([1000]);
        // Or use: navigator.vibrate(1000);
      } else {
        alert("Vibration API is not supported on this device.");
      }
    }

    function stopVibration() {
      if ("vibrate" in navigator) {
        // Stop the vibration
        navigator.vibrate(0);
      }
    }
  </script>
</html>
